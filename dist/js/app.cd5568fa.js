(function(t){function e(e){for(var r,a,i=e[0],u=e[1],l=e[2],h=0,d=[];h<i.length;h++)a=i[h],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);s&&s(e);while(d.length)d.shift()();return c.push.apply(c,l||[]),n()}function n(){for(var t,e=0;e<c.length;e++){for(var n=c[e],r=!0,i=1;i<n.length;i++){var u=n[i];0!==o[u]&&(r=!1)}r&&(c.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},o={app:0},c=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var s=u;c.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0907":function(t,e,n){"use strict";n("b7d2")},"45ff":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23");function o(t,e,n,o,c,a){var i=Object(r["A"])("Controll"),u=Object(r["A"])("n-layout-sider"),l=Object(r["A"])("Draw"),s=Object(r["A"])("n-layout"),h=Object(r["A"])("n-config-provider");return Object(r["s"])(),Object(r["e"])(h,{theme:o.darkTheme},{default:Object(r["F"])((function(){return[Object(r["h"])(s,{"has-sider":""},{default:Object(r["F"])((function(){return[Object(r["h"])(u,{width:360},{default:Object(r["F"])((function(){return[Object(r["h"])(i)]})),_:1}),Object(r["h"])(s,null,{default:Object(r["F"])((function(){return[Object(r["h"])(l,{msg:"Welcome to Your Vue.js App"})]})),_:1})]})),_:1})]})),_:1},8,["theme"])}var c=n("5927"),a=n("48da"),i=n("8c9c"),u=n("8f5d"),l=Object(r["G"])("data-v-06aaccc6");Object(r["v"])("data-v-06aaccc6");var s={class:"contorll"},h=Object(r["h"])("div",{class:"header"},"1. 设定地理数据",-1),d={class:"formItem"},f=Object(r["h"])("label",null,"地图行数",-1),b={class:"formItem"},v=Object(r["h"])("label",null,"地图列数",-1),p={class:"formBtn"},O=Object(r["g"])("生成随机地图数据"),j={class:"contorll"},g=Object(r["h"])("div",{class:"header"},"2. 设定业务数据",-1),m={class:"formItem"},w=Object(r["h"])("label",null,"剥麻机数量",-1),y={class:"formItem"},_=Object(r["h"])("label",null,"田地到机器能耗系数",-1),I={class:"formItem"},P=Object(r["h"])("label",null,"机器到仓库能耗系数",-1),x={class:"formBtn"},M=Object(r["g"])("计算最佳方案");Object(r["t"])();var T=l((function(t,e,n,o,c,a){var i=Object(r["A"])("n-input-number"),u=Object(r["A"])("n-button");return Object(r["s"])(),Object(r["e"])("div",{style:a.style},[Object(r["h"])("div",s,[h,Object(r["h"])("div",d,[f,Object(r["h"])(i,{placeholder:"","show-button":!1,value:c.row,"onUpdate:value":e[1]||(e[1]=function(t){return c.row=t})},null,8,["value"])]),Object(r["h"])("div",b,[v,Object(r["h"])(i,{placeholder:"","show-button":!1,value:c.col,"onUpdate:value":e[2]||(e[2]=function(t){return c.col=t})},null,8,["value"])]),Object(r["h"])("div",p,[Object(r["h"])(u,{onClick:a.genGeos},{default:l((function(){return[O]})),_:1},8,["onClick"])])]),Object(r["h"])("div",j,[g,Object(r["h"])("div",m,[w,Object(r["h"])(i,{placeholder:"","show-button":!1,value:c.machine,"onUpdate:value":e[3]||(e[3]=function(t){return c.machine=t})},null,8,["value"])]),Object(r["h"])("div",y,[_,Object(r["h"])(i,{placeholder:"","show-button":!1,value:c.fieldPower,"onUpdate:value":e[4]||(e[4]=function(t){return c.fieldPower=t})},null,8,["value"])]),Object(r["h"])("div",I,[P,Object(r["h"])(i,{placeholder:"","show-button":!1,value:c.repoPower,"onUpdate:value":e[5]||(e[5]=function(t){return c.repoPower=t})},null,8,["value"])]),Object(r["h"])("div",x,[Object(r["h"])(u,{onClick:a.calcResult},{default:l((function(){return[M]})),_:1},8,["onClick"])])])],4)})),N=n("2909"),R=(n("99af"),n("d81d"),n("159b"),n("a9e3"),n("fb6a"),n("3519")),k=n("21e1"),A={name:"Control",components:{NButton:R["a"],NInputNumber:k["a"]},computed:{geos:function(){return this.$store.state.geos},style:function(){return{height:window.innerHeight+"px"}}},data:function(){return{row:4,col:4,machine:2,fieldPower:1,repoPower:1}},methods:{genGeos:function(){(this.row<=0||this.col<=0)&&alert("行数/列数无效");for(var t=[],e=0;e<this.row;e++){for(var n=[],r=0;r<this.col;r++)n.push(Math.round(10*Math.random()));t.push(n)}this.$store.commit("setGeos",t)},calcResult:function(){var t=this;if(!this.geos||this.geos.length<=0)alert("需要先生成地图数据");else{var e=document.getElementById("progress");e.style.visibility="visible";var n=function(e,n){var r={};function o(){var t="".concat(e[0],"_").concat(e[1],"_").concat(n[0],"_").concat(n[1]);if(r[t])return r[t];var o=Math.abs(e[0]-n[0])+Math.abs(e[1]-n[1]),c=o*this.fieldPower*this.geos[e[1]][e[0]];return r[t]=c,c}return o.apply(t)},r=function(e,n){var r={};function o(){var t="".concat(e[0],"_").concat(e[1],"_").concat(n[0],"_").concat(n[1]);if(r[t])return r[t];var o=Math.abs(e[0]-n[0])+Math.abs(e[1]-n[1]),c=o*this.repoPower;return r[t]=c,c}return o.apply(t)},o=function(e,o,c){var a=o.map((function(o){var a=n(e,o),i=r(o,c),u=i*t.geos[e[1]][e[0]];return a+u}));return Math.min.apply(Math,Object(N["a"])(a))},c=function(t,e,n){var r=0;return t.forEach((function(t){r+=o(t,e,n)})),r},a=function(t,e,n){var r=Number.POSITIVE_INFINITY,o=void 0,a=[],i=function e(i,u){if(1!==i.length)for(var l=i[0],s=0;s<l.length;s++){a[u]=l[s];var h=i.slice(1);e(h,u+1)}else for(var d=i[0],f=0;f<d.length;f++){a[u]=d[f];var b=c(t,a,n);b<r&&(r=b,o=[].concat(a))}};return i(e,0),{result:r,resultMachine:o}},i=function(){for(var n=[],r=0;r<t.row;r++)for(var o=0;o<t.col;o++)n.push([r,o]);for(var c=n,i=n,u=[],l=0;l<t.machine;l++)u.push(n);for(var s=Number.POSITIVE_INFINITY,h=void 0,d=void 0,f=0,b=i;f<b.length;f++){var v=b[f],p=a(c,u,v),O=p.result,j=p.resultMachine;O<s&&(s=O,d=j,h=v)}return e.style.visibility="hidden",{bestResult:s,bestResultMachine:d,bestResultRepo:h}};setTimeout((function(){var e=i();t.$store.commit("setResult",e)}),100)}}}};n("ce63");A.render=T,A.__scopeId="data-v-06aaccc6";var B=A,S=Object(r["G"])("data-v-3aa5cbde");Object(r["v"])("data-v-3aa5cbde");var C={id:"draw"},G=Object(r["h"])("div",{id:"progress"},"计算中...",-1);Object(r["t"])();var F=S((function(t,e,n,o,c,a){return Object(r["s"])(),Object(r["e"])("div",C,[G,Object(r["h"])("canvas",{id:"canvas",width:2*c.width,height:2*c.height,style:{width:"".concat(c.width,"px"),height:"".concat(c.height,"px")}},null,12,["width","height"]),a.result?(Object(r["s"])(),Object(r["e"])("div",{key:0,id:"result",style:{width:"".concat(c.width,"px"),height:"".concat(c.height,"px")}},[Object(r["h"])("div",null,"最佳效果: "+Object(r["B"])(a.result.bestResult),1),Object(r["h"])("div",null,"剥麻机位置: "+Object(r["B"])(JSON.stringify(a.result.bestResultMachine)),1),Object(r["h"])("div",null,"仓库位置: "+Object(r["B"])(JSON.stringify(a.result.bestResultRepo)),1)],4)):Object(r["f"])("",!0)])})),E={name:"Draw",data:function(){return{width:600,height:600}},computed:{geos:function(){return this.$store.state.geos},result:function(){return this.$store.state.result}},watch:{geos:function(){this.drawGeo()}},methods:{drawGeo:function(){var t=document.getElementById("canvas").getContext("2d");t.clearRect(0,0,2*this.width,2*this.height);var e=this.geos.length,n=this.geos[0].length,r=Math.min(2*this.width/n,2*this.height/e);t.font="".concat(r/3,"px Avenir, Helvetica, Arial, sans-serif"),t.fillStyle="#aaa";for(var o=0;o<=e;o++)t.beginPath(),t.moveTo(0,o*r),t.lineTo(n*r,o*r),t.stroke();for(var c=0;c<=n;c++)t.beginPath(),t.moveTo(c*r,0),t.lineTo(c*r,e*r),t.stroke();for(var a=0;a<e;a++)for(var i=0;i<n;i++){var u=t.measureText(this.geos[a][i]),l=u.width,s=u.fontBoundingBoxAscent,h=u.fontBoundingBoxDescent,d=h-s;t.fillText(this.geos[a][i],i*r+(r-l)/2,a*r+(r-d)/2)}}}};n("61d3");E.render=F,E.__scopeId="data-v-3aa5cbde";var U=E,$={name:"App",components:{NConfigProvider:c["b"],NLayout:a["a"],NLayoutSider:i["a"],Controll:B,Draw:U},setup:function(){return{darkTheme:u["a"]}}};n("0907");$.render=o;var D=$,J=n("5502"),V=Object(J["a"])({state:{geos:[],result:void 0},mutations:{setGeos:function(t,e){t.geos=e},setResult:function(t,e){t.result=e}},actions:{},modules:{}});Object(r["d"])(D).use(V).mount("#app")},"61d3":function(t,e,n){"use strict";n("bb79")},b7d2:function(t,e,n){},bb79:function(t,e,n){},ce63:function(t,e,n){"use strict";n("45ff")}});
//# sourceMappingURL=app.cd5568fa.js.map