(function(e){function t(t){for(var r,a,i=t[0],u=t[1],l=t[2],h=0,d=[];h<i.length;h++)a=i[h],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);s&&s(t);while(d.length)d.shift()();return c.push.apply(c,l||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,i=1;i<n.length;i++){var u=n[i];0!==o[u]&&(r=!1)}r&&(c.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={app:0},c=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var s=u;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0907":function(e,t,n){"use strict";n("b7d2")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23");function o(e,t,n,o,c,a){var i=Object(r["A"])("Controll"),u=Object(r["A"])("n-layout-sider"),l=Object(r["A"])("Draw"),s=Object(r["A"])("n-layout"),h=Object(r["A"])("n-config-provider");return Object(r["s"])(),Object(r["e"])(h,{theme:o.darkTheme},{default:Object(r["F"])((function(){return[Object(r["h"])(s,{"has-sider":""},{default:Object(r["F"])((function(){return[Object(r["h"])(u,{width:360},{default:Object(r["F"])((function(){return[Object(r["h"])(i)]})),_:1}),Object(r["h"])(s,null,{default:Object(r["F"])((function(){return[Object(r["h"])(l,{msg:"Welcome to Your Vue.js App"})]})),_:1})]})),_:1})]})),_:1},8,["theme"])}var c=n("5927"),a=n("48da"),i=n("8c9c"),u=n("8f5d"),l=Object(r["G"])("data-v-1bfb9c02");Object(r["v"])("data-v-1bfb9c02");var s={class:"contorll"},h=Object(r["h"])("div",{class:"header"},"1. 设定地理数据",-1),d={class:"formItem"},b=Object(r["h"])("label",null,"地图行数",-1),f={class:"formItem"},v=Object(r["h"])("label",null,"地图列数",-1),p={class:"formBtn"},O=Object(r["g"])("生成随机地图数据"),j={class:"contorll"},g=Object(r["h"])("div",{class:"header"},"2. 设定业务数据",-1),m={class:"formItem"},w=Object(r["h"])("label",null,"剥麻机数量",-1),y={class:"formItem"},_=Object(r["h"])("label",null,"田地到机器能耗系数",-1),x={class:"formItem"},I=Object(r["h"])("label",null,"机器到仓库能耗系数",-1),P={class:"formBtn"},M=Object(r["g"])("计算最佳方案");Object(r["t"])();var T=l((function(e,t,n,o,c,a){var i=Object(r["A"])("n-input-number"),u=Object(r["A"])("n-button");return Object(r["s"])(),Object(r["e"])("div",{style:a.style},[Object(r["h"])("div",s,[h,Object(r["h"])("div",d,[b,Object(r["h"])(i,{placeholder:"",max:6,value:c.row,"onUpdate:value":t[1]||(t[1]=function(e){return c.row=e})},null,8,["value"])]),Object(r["h"])("div",f,[v,Object(r["h"])(i,{placeholder:"",max:6,value:c.col,"onUpdate:value":t[2]||(t[2]=function(e){return c.col=e})},null,8,["value"])]),Object(r["h"])("div",p,[Object(r["h"])(u,{onClick:a.genGeos},{default:l((function(){return[O]})),_:1},8,["onClick"])])]),Object(r["h"])("div",j,[g,Object(r["h"])("div",m,[w,Object(r["h"])(i,{placeholder:"",max:3,value:c.machine,"onUpdate:value":t[3]||(t[3]=function(e){return c.machine=e})},null,8,["value"])]),Object(r["h"])("div",y,[_,Object(r["h"])(i,{placeholder:"","show-button":!1,value:c.fieldPower,"onUpdate:value":t[4]||(t[4]=function(e){return c.fieldPower=e})},null,8,["value"])]),Object(r["h"])("div",x,[I,Object(r["h"])(i,{placeholder:"","show-button":!1,value:c.repoPower,"onUpdate:value":t[5]||(t[5]=function(e){return c.repoPower=e})},null,8,["value"])]),Object(r["h"])("div",P,[Object(r["h"])(u,{onClick:a.calcResult},{default:l((function(){return[M]})),_:1},8,["onClick"])])])],4)})),N=n("2909"),R=(n("99af"),n("d81d"),n("159b"),n("a9e3"),n("fb6a"),n("3519")),k=n("21e1"),A={name:"Control",components:{NButton:R["a"],NInputNumber:k["a"]},computed:{geos:function(){return this.$store.state.geos},style:function(){return{height:window.innerHeight+"px"}}},data:function(){return{row:4,col:4,machine:2,fieldPower:1,repoPower:1}},methods:{genGeos:function(){(this.row<=0||this.col<=0)&&alert("行数/列数无效");for(var e=[],t=0;t<this.row;t++){for(var n=[],r=0;r<this.col;r++)n.push(Math.pow(Math.round(10*Math.random()),2));e.push(n)}this.$store.commit("setGeos",e)},calcResult:function(){var e=this;if(!this.geos||this.geos.length<=0)alert("需要先生成地图数据");else{var t=document.getElementById("progress");t.style.visibility="visible";var n=function(t,n){var r={};function o(){var e="".concat(t[0],"_").concat(t[1],"_").concat(n[0],"_").concat(n[1]);if(r[e])return r[e];var o=Math.abs(t[0]-n[0])+Math.abs(t[1]-n[1]),c=o*this.fieldPower*this.geos[t[1]][t[0]];return r[e]=c,c}return o.apply(e)},r=function(t,n){var r={};function o(){var e="".concat(t[0],"_").concat(t[1],"_").concat(n[0],"_").concat(n[1]);if(r[e])return r[e];var o=Math.abs(t[0]-n[0])+Math.abs(t[1]-n[1]),c=o*this.repoPower;return r[e]=c,c}return o.apply(e)},o=function(t,o,c){var a=o.map((function(o){var a=n(t,o),i=r(o,c),u=i*e.geos[t[1]][t[0]];return a+u}));return Math.min.apply(Math,Object(N["a"])(a))},c=function(e,t,n){var r=0;return e.forEach((function(e){r+=o(e,t,n)})),r},a=function(e,t,n){var r=Number.POSITIVE_INFINITY,o=void 0,a=[],i=function t(i,u){if(1!==i.length)for(var l=i[0],s=0;s<l.length;s++){a[u]=l[s];var h=i.slice(1);t(h,u+1)}else for(var d=i[0],b=0;b<d.length;b++){a[u]=d[b];var f=c(e,a,n);f<r&&(r=f,o=[].concat(a))}};return i(t,0),{result:r,resultMachine:o}},i=function(){for(var n=[],r=0;r<e.row;r++)for(var o=0;o<e.col;o++)n.push([r,o]);for(var c=n,i=n,u=[],l=0;l<e.machine;l++)u.push(n);for(var s=Number.POSITIVE_INFINITY,h=void 0,d=void 0,b=0,f=i;b<f.length;b++){var v=f[b],p=a(c,u,v),O=p.result,j=p.resultMachine;O<s&&(s=O,d=j,h=v)}return t.style.visibility="hidden",{bestResult:s,bestResultMachine:d,bestResultRepo:h}};setTimeout((function(){var t=i();e.$store.commit("setResult",t)}),100)}}}};n("d08b");A.render=T,A.__scopeId="data-v-1bfb9c02";var B=A,S=Object(r["G"])("data-v-3aa5cbde");Object(r["v"])("data-v-3aa5cbde");var C={id:"draw"},G=Object(r["h"])("div",{id:"progress"},"计算中...",-1);Object(r["t"])();var F=S((function(e,t,n,o,c,a){return Object(r["s"])(),Object(r["e"])("div",C,[G,Object(r["h"])("canvas",{id:"canvas",width:2*c.width,height:2*c.height,style:{width:"".concat(c.width,"px"),height:"".concat(c.height,"px")}},null,12,["width","height"]),a.result?(Object(r["s"])(),Object(r["e"])("div",{key:0,id:"result",style:{width:"".concat(c.width,"px"),height:"".concat(c.height,"px")}},[Object(r["h"])("div",null,"最佳效果: "+Object(r["B"])(a.result.bestResult),1),Object(r["h"])("div",null,"剥麻机位置: "+Object(r["B"])(JSON.stringify(a.result.bestResultMachine)),1),Object(r["h"])("div",null,"仓库位置: "+Object(r["B"])(JSON.stringify(a.result.bestResultRepo)),1)],4)):Object(r["f"])("",!0)])})),E={name:"Draw",data:function(){return{width:600,height:600}},computed:{geos:function(){return this.$store.state.geos},result:function(){return this.$store.state.result}},watch:{geos:function(){this.drawGeo()}},methods:{drawGeo:function(){var e=document.getElementById("canvas").getContext("2d");e.clearRect(0,0,2*this.width,2*this.height);var t=this.geos.length,n=this.geos[0].length,r=Math.min(2*this.width/n,2*this.height/t);e.font="".concat(r/3,"px Avenir, Helvetica, Arial, sans-serif"),e.fillStyle="#aaa";for(var o=0;o<=t;o++)e.beginPath(),e.moveTo(0,o*r),e.lineTo(n*r,o*r),e.stroke();for(var c=0;c<=n;c++)e.beginPath(),e.moveTo(c*r,0),e.lineTo(c*r,t*r),e.stroke();for(var a=0;a<t;a++)for(var i=0;i<n;i++){var u=e.measureText(this.geos[a][i]),l=u.width,s=u.fontBoundingBoxAscent,h=u.fontBoundingBoxDescent,d=h-s;e.fillText(this.geos[a][i],i*r+(r-l)/2,a*r+(r-d)/2)}}}};n("61d3");E.render=F,E.__scopeId="data-v-3aa5cbde";var U=E,$={name:"App",components:{NConfigProvider:c["b"],NLayout:a["a"],NLayoutSider:i["a"],Controll:B,Draw:U},setup:function(){return{darkTheme:u["a"]}}};n("0907");$.render=o;var D=$,J=n("5502"),V=Object(J["a"])({state:{geos:[],result:void 0},mutations:{setGeos:function(e,t){e.geos=t},setResult:function(e,t){e.result=t}},actions:{},modules:{}});Object(r["d"])(D).use(V).mount("#app")},"61d3":function(e,t,n){"use strict";n("bb79")},"8b0e":function(e,t,n){},b7d2:function(e,t,n){},bb79:function(e,t,n){},d08b:function(e,t,n){"use strict";n("8b0e")}});
//# sourceMappingURL=app.d784faff.js.map